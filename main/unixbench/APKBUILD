pkgname=unixbench
pkgver=6.0.0
pkgrel=0
pkgdesc="The original BYTE UNIX benchmark suite"
url="https://github.com/kdlucas/byte-unixbench"
arch="all"
license="GPL-2.0-or-later"
depends="perl make"
options="!check"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/kdlucas/byte-unixbench/archive/v$pkgver.tar.gz
	0001-Stop-using-native-CPU-optimizations.patch
	0002-Specify-the-C-standard.patch
	ubench
"
builddir="$srcdir/byte-unixbench-$pkgver/UnixBench"

build() {
	make
}

package() {
	install -Dm775 "$srcdir"/ubench "$pkgdir"/usr/bin/ubench
	install -Dm775 Run "$pkgdir"/usr/share/unixbench/Run

	cp -a pgms testdir Makefile src "$pkgdir"/usr/share/unixbench
}

sha512sums="
9f30091b4300cb01235b36679aa62b5c7034dc1ebbbfe345f30622cf46fb39431acd5e206a3b2422d2c0566bf3b807968f2b70689238e593003a6a190dd24e8c  unixbench-6.0.0.tar.gz
10138fd425365cfd9fc624f6f47d5f49f087d763cd7c7a329fa6639c15d29224aae9ac8fbd02d2632e8a01559ba47ff7381418b2f31fdbc478159e779c299ce4  0001-Stop-using-native-CPU-optimizations.patch
4165d0204c70eb0f27ef27a214d0284ad444c77c4607d717946d13037dd649a28d3b2158fcbf2520db8c2a2c7c0b134580bd6a513ffc82aaffed35d50a390a37  0002-Specify-the-C-standard.patch
91590bfaac3b118ad9a7ec66200ecc7b5ff88b84f5e8552c6b30fcc4436669eb4467d6b9a89d0be8682903e88b843fc4e40e3c7f90406c398449edb187ad6771  ubench
"
