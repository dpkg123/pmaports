pkgname=firmware-lenovo-q706f
pkgver=20240726
pkgrel=1
pkgdesc="Firmware for Lenovo Xiaoxin Pad Pro 12.6 (Lenovo Tab P12 Pro)"
subpackages="
	$pkgname-adreno
	$pkgname-adsp
	$pkgname-cdsp
	$pkgname-cirrus
	$pkgname-slpi
	$pkgname-venus
	"
url="https://github.com/silime/lenovo-sm8250-q706f-firmware"
arch="aarch64"
license="proprietary"
options="!check !strip !archcheck !tracedeps pmb:cross-native"
_commit="24f7bcfbe457e5de21a2600be4619303503d3695"
source="https://github.com/silime/lenovo-sm8250-q706f-firmware/archive/$_commit.zip"
builddir="$srcdir/lenovo-sm8250-q706f-firmware-$_commit"

package() {
	# parent package is empty
	mkdir -p "$pkgdir"
}

# lenovo q706f boots with secure boot, it can only load signed firmwares.
adreno() {
	pkgdesc="Lenovo q706f adreno firmware"
	depends="firmware-qcom-adreno-a650"
	ls "$builddir"
	install -Dm644 "$builddir"/sm8250/q706f/a650_zap.mbn -t \
		"$subpkgdir/lib/firmware/qcom/sm8250/q706f/"
}

adsp() {
	pkgdesc="Lenovo q706f adsp firmware"

	install -Dm644 "$builddir"/sm8250/q706f/adsp* -t \
		"$subpkgdir/lib/firmware/qcom/sm8250/q706f/"
}

cdsp() {
	pkgdesc="Lenovo q706f cdsp firmware"

	install -Dm644 "$builddir"/sm8250/q706f/cdsp* -t \
		"$subpkgdir/lib/firmware/qcom/sm8250/q706f/"
}

cirrus() {
	pkgdesc="Lenovo q706f cirrus firmware"

	install -Dm644 "$builddir"/cirrus/cs35l45* -t \
		"$subpkgdir/lib/firmware/cirrus/"
}

slpi() {
	pkgdesc="Lenovo q706f slpi firmware"

	install -Dm644 "$builddir"/sm8250/q706f/slpi* -t \
		"$subpkgdir/lib/firmware/qcom/sm8250/q706f/"
}

venus() {
	pkgdesc="Lenovo q706f venus firmware"

	install -Dm644 "$builddir"/sm8250/q706f/venus.mbn -t \
		"$subpkgdir/lib/firmware/qcom/sm8250/q706f/"
}

sha512sums="
8590482902de2239e0d2edac36a548ccc51204a8c8173ed865f1f0697435eb70b1de8680e8fa2b7bb2274ad0876ab42e64d25682cfab171f45eb4c9f5819ed2c  24f7bcfbe457e5de21a2600be4619303503d3695.zip
"
